# Nostr BBS - Section Configuration Template
# Copy this file to sections.yaml and customize for your community
#
# Hierarchy: Category ‚Üí Section ‚Üí Forum (NIP-28 Channel)
# Forums are dynamically populated from Nostr events tagged to sections

app:
  name: 'My Community BBS'
  version: '2.0.0'
  defaultPath: '/general/welcome'
  tiers:
    - { level: 1, name: 'Category', plural: 'Categories' }
    - { level: 2, name: 'Section', plural: 'Sections' }
    - { level: 3, name: 'Forum', plural: 'Forums' }

# Superuser configuration (required for initial setup)
superuser:
  pubkey: '' # Set this to your admin pubkey (64-char hex)
  name: 'Instance Owner'
  relayUrl: '' # Optional: your relay URL (wss://...)

# Deployment URLs (optional - set for your deployment)
deployment:
  relayUrl: '' # wss://your-relay.run.app
  embeddingApiUrl: '' # https://your-embedding-api.run.app
  gcsEmbeddingsUrl: '' # https://storage.googleapis.com/your-bucket
  frontendUrl: '' # https://your-domain.github.io/your-bbs

# Role definitions (hierarchical from lowest to highest)
roles:
  - id: 'guest'
    name: 'Guest'
    level: 0
    description: 'Basic authenticated user'

  - id: 'member'
    name: 'Member'
    level: 1
    description: 'Approved section member'

  - id: 'moderator'
    name: 'Moderator'
    level: 2
    description: 'Can manage forums and moderate content'
    capabilities:
      - 'forum.create'
      - 'forum.lock'
      - 'message.pin'
      - 'message.delete'

  - id: 'section-admin'
    name: 'Section Admin'
    level: 3
    description: 'Administrator for a specific section'
    capabilities:
      - 'section.manage'
      - 'member.approve'
      - 'member.remove'
      - 'forum.create'
      - 'forum.delete'
      - 'message.pin'
      - 'message.delete'

  - id: 'admin'
    name: 'Admin'
    level: 4
    description: 'Global administrator'
    capabilities:
      - 'admin.global'
      - 'category.create'
      - 'category.delete'
      - 'section.create'
      - 'section.delete'
      - 'section.manage'
      - 'member.approve'
      - 'member.remove'
      - 'forum.create'
      - 'forum.delete'
      - 'message.pin'
      - 'message.delete'
      - 'user.whitelist'

# Cohort definitions (group memberships)
# Customize these for your community
cohorts:
  - id: 'admin'
    name: 'Administrators'
    description: 'Global system administrators'

  - id: 'approved'
    name: 'Approved Users'
    description: 'Manually approved by admin'

  - id: 'members'
    name: 'Community Members'
    description: 'Core community members'

# 3-Tier Hierarchy: Categories containing Sections
categories:
  #=============================================================================
  # GENERAL - Public areas open to all authenticated users
  #=============================================================================
  - id: 'general'
    name: 'General'
    description: 'Public discussion areas'
    icon: 'üí¨'
    order: 1
    sections:
      - id: 'welcome'
        name: 'Welcome'
        description: 'Welcome area for new visitors'
        icon: 'üëã'
        order: 1
        access:
          requiresApproval: false
          defaultRole: 'guest'
          autoApprove: true
        calendar:
          access: 'full'
          canCreate: false
        ui:
          color: '#6366f1'
        showStats: true
        allowForumCreation: false

      - id: 'announcements'
        name: 'Announcements'
        description: 'Official news and updates'
        icon: 'üì¢'
        order: 2
        access:
          requiresApproval: false
          defaultRole: 'guest'
          autoApprove: true
        calendar:
          access: 'full'
          canCreate: false
        ui:
          color: '#f59e0b'
        showStats: true
        allowForumCreation: false

      - id: 'help'
        name: 'Help & Support'
        description: 'Get help with using the platform'
        icon: '‚ùì'
        order: 3
        access:
          requiresApproval: false
          defaultRole: 'guest'
          autoApprove: true
        calendar:
          access: 'none'
          canCreate: false
        ui:
          color: '#10b981'
        showStats: true
        allowForumCreation: false

  #=============================================================================
  # COMMUNITY - Members-only areas
  #=============================================================================
  - id: 'community'
    name: 'Community'
    description: 'Members-only discussion spaces'
    icon: 'üåü'
    order: 2
    sections:
      - id: 'discussions'
        name: 'Discussions'
        description: 'General member discussions'
        icon: 'üí≠'
        order: 1
        access:
          requiresApproval: true
          defaultRole: 'member'
          autoApprove: false
        calendar:
          access: 'full'
          canCreate: true
        ui:
          color: '#8b5cf6'
        showStats: true
        allowForumCreation: true

      - id: 'introductions'
        name: 'Introductions'
        description: 'Introduce yourself to the community'
        icon: 'üôã'
        order: 2
        access:
          requiresApproval: true
          defaultRole: 'member'
          autoApprove: false
        calendar:
          access: 'none'
          canCreate: false
        ui:
          color: '#06b6d4'
        showStats: true
        allowForumCreation: false

      - id: 'events'
        name: 'Events'
        description: 'Community events and meetups'
        icon: 'üìÖ'
        order: 3
        access:
          requiresApproval: true
          defaultRole: 'member'
          autoApprove: false
        calendar:
          access: 'full'
          canCreate: true
        ui:
          color: '#ec4899'
        showStats: true
        allowForumCreation: true

  #=============================================================================
  # PROJECTS - Collaborative project spaces
  #=============================================================================
  - id: 'projects'
    name: 'Projects'
    description: 'Collaborative project spaces'
    icon: 'üöÄ'
    order: 3
    sections:
      - id: 'active-projects'
        name: 'Active Projects'
        description: 'Currently active project discussions'
        icon: 'üí°'
        order: 1
        access:
          requiresApproval: true
          defaultRole: 'member'
          autoApprove: false
        calendar:
          access: 'availability'
          canCreate: true
          cohortRestricted: true
        ui:
          color: '#ec4899'
        showStats: true
        allowForumCreation: true

      - id: 'resources'
        name: 'Resources'
        description: 'Shared files and documentation'
        icon: 'üìö'
        order: 2
        access:
          requiresApproval: true
          defaultRole: 'member'
          autoApprove: false
        calendar:
          access: 'none'
          canCreate: false
        ui:
          color: '#84cc16'
        showStats: false
        allowForumCreation: false

# Calendar access levels
calendarAccessLevels:
  - id: 'full'
    name: 'Full Access'
    description: 'Can see all event details'
    canView: true
    canViewDetails: true

  - id: 'availability'
    name: 'Availability Only'
    description: 'Can see dates are booked but not details'
    canView: true
    canViewDetails: false

  - id: 'cohort'
    name: 'Cohort Restricted'
    description: "Can see events tagged with user's cohort"
    canView: true
    canViewDetails: 'cohort-match'

  - id: 'none'
    name: 'No Access'
    description: 'Cannot see calendar'
    canView: false
    canViewDetails: false

# Channel visibility options
channelVisibility:
  - id: 'public'
    name: 'Public'
    description: 'Visible and joinable by all section members'

  - id: 'cohort'
    name: 'Cohort Only'
    description: 'Only visible to users in assigned cohorts'

  - id: 'invite'
    name: 'Invite Only'
    description: 'Only visible to explicitly invited users'
